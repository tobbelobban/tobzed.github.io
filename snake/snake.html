<canvas id="canvas" width="400" height="400"></canvas>
<script>
window.onload = function() {
  canvas = document.getElementById("canvas");
  ctx = canvas.getContext("2d");
  document.addEventListener("keydown", pushed_key);
  setInterval(game,1000/10);
};

snake_x = 9, snake_y = 9;
x_vel = 0, y_vel = 0;
player_size = 20;
tail_length = 4;
tail = [];
edge_length = canvas.width / player_size; 

function game() {
  snake_x += x_vel;
  snake_y += y_vel;
  if(snake_x < 0) {
    snake_x = edge_length - 1;
  } else if(snake_x >= edge_length) {
    snake_x = 0;
  } else if(snake_y < 0) {
    snake_y = edge_length - 1;
  } else if(snake_y >= edge_length) {
    snake_y = 0;
  }
  ctx.fillStyle = "black";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = "orange";
  for(var i = 0; i < tail.length; i++) {
    ctx.fillRect(tail[i].x*edge_length,tail[i].y*edge_length,player_size,player_size);
  }
  tail.push({x:snake_x,y:snake_y});
  if(tail.length > tail_length) {
    tail.shift();
  }
  
}

function pushed_key(event) {
  switch(event.keyEvent()) {
    case 37:
      x_vel = -1;
      y_vel = 0;
      break;
    case 38:
      x_vel = 0;
      y_vel = -1;
      break;
    case 39:
      x_vel = 1;
      y_vel = 0;
      break;
    case 40:
      x_vel = 0;
      y_vel = 1;
      break;
  }
}

</script>
